openapi: 3.1.0
info:
  title: CogniForge Core API
  description: |
    # CogniForge API-First Architecture
    
    منصة تعليمية ذكية مدعومة بالذكاء الاصطناعي مع معمارية API-First كاملة.
    
    ## المبادئ الأساسية
    - **API-First**: النظام مصمم أولاً كـ API
    - **Platform Independent**: يعمل على أي منصة (Web, Mobile, Desktop)
    - **Language Agnostic**: يمكن استخدامه من أي لغة برمجة
    - **Stateless**: كل طلب مستقل
    
    ## المصادقة
    يستخدم النظام JWT (JSON Web Tokens) للمصادقة.
    ```
    Authorization: Bearer <token>
    ```
    
    ## معدلات الطلبات
    - **معدل عام**: 100 طلب/دقيقة
    - **نقاط النهاية الحساسة**: 10 طلبات/دقيقة
    
    ## Versioning
    - **الإصدار الحالي**: v1
    - **Base URL**: `/api/v1`
  version: "1.0.0"
  contact:
    name: CogniForge Support
    email: support@cogniforge.ai
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.cogniforge.ai/api/v1
    description: Production Server
  - url: https://staging-api.cogniforge.ai/api/v1
    description: Staging Server
  - url: http://localhost:8000/api/v1
    description: Local Development

tags:
  - name: Security
    description: Authentication & Authorization endpoints
  - name: Agents
    description: Agent planning and coordination endpoints
  - name: Users
    description: User management operations
  - name: CRUD
    description: Generic CRUD operations for resources
  - name: Admin
    description: Administrative operations
  - name: Observability
    description: Monitoring, metrics, and health checks

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from /api/security/login
  
  schemas:
    # ==============================================================================
    # Common Schemas
    # ==============================================================================
    ErrorResponse:
      type: object
      required:
        - status
        - error
        - timestamp
      properties:
        status:
          type: string
          enum: [error, fail]
          description: Status of the response
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: Machine-readable error code
              example: "INVALID_CREDENTIALS"
            message:
              type: string
              description: Human-readable error message
              example: "Invalid email or password"
            details:
              type: object
              description: Additional error details
              additionalProperties: true
        timestamp:
          type: string
          format: date-time
          description: ISO 8601 timestamp
          example: "2026-01-03T00:00:00Z"
        request_id:
          type: string
          description: Unique request identifier for tracing
          example: "req_abc123xyz"
      example:
        status: "error"
        error:
          code: "INVALID_CREDENTIALS"
          message: "Invalid email or password"
        timestamp: "2026-01-03T00:00:00Z"
        request_id: "req_abc123xyz"
    
    SuccessResponse:
      type: object
      required:
        - status
        - data
      properties:
        status:
          type: string
          enum: [success]
          description: Status of the response
        data:
          type: object
          description: Response payload
          additionalProperties: true
        meta:
          type: object
          description: Metadata about the response
          properties:
            timestamp:
              type: string
              format: date-time
            request_id:
              type: string
        links:
          type: object
          description: HATEOAS links for related resources
          additionalProperties:
            type: string
            format: uri
      example:
        status: "success"
        data:
          id: 123
        meta:
          timestamp: "2026-01-03T00:00:00Z"
          request_id: "req_abc123xyz"
    
    PaginationMeta:
      type: object
      required:
        - page
        - per_page
        - total
        - total_pages
      properties:
        page:
          type: integer
          minimum: 1
          description: Current page number
          example: 1
        per_page:
          type: integer
          minimum: 1
          maximum: 100
          description: Items per page
          example: 20
        total:
          type: integer
          minimum: 0
          description: Total number of items
          example: 157
        total_pages:
          type: integer
          minimum: 0
          description: Total number of pages
          example: 8
        has_next:
          type: boolean
          description: Whether there is a next page
        has_prev:
          type: boolean
          description: Whether there is a previous page
      example:
        page: 1
        per_page: 20
        total: 157
        total_pages: 8
        has_next: true
        has_prev: false
    
    # ==============================================================================
    # Security Schemas
    # ==============================================================================
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: "user@example.com"
        password:
          type: string
          format: password
          minLength: 8
          description: User password
          example: "SecurePass123!"
      example:
        email: "user@example.com"
        password: "SecurePass123!"
    
    RegisterRequest:
      type: object
      required:
        - email
        - password
        - full_name
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: "newuser@example.com"
        password:
          type: string
          format: password
          minLength: 8
          description: User password (must be at least 8 characters)
          example: "SecurePass123!"
        full_name:
          type: string
          minLength: 2
          maxLength: 100
          description: User's full name
          example: "John Doe"
      example:
        email: "newuser@example.com"
        password: "SecurePass123!"
        full_name: "John Doe"

    # ==============================================================================
    # Agents Schemas
    # ==============================================================================
    AgentPlanStep:
      type: object
      required:
        - step_id
        - title
        - description
      properties:
        step_id:
          type: string
          description: Unique identifier for the plan step
          example: "step-01"
        title:
          type: string
          description: Short title of the plan step
          example: "تحليل الهدف"
        description:
          type: string
          description: Detailed explanation of the plan step
          example: "جمع المعطيات وتحليل المشكلة لتحديد نطاق التنفيذ."
        dependencies:
          type: array
          description: List of step IDs that must be completed first
          items:
            type: string
          example: ["step-00"]
        estimated_effort:
          type: string
          description: Human-readable estimate for the step
          example: "2 ساعات"
      example:
        step_id: "step-01"
        title: "تحليل الهدف"
        description: "جمع المعطيات وتحليل المشكلة لتحديد نطاق التنفيذ."
        dependencies: ["step-00"]
        estimated_effort: "2 ساعات"

    AgentsPlanRequest:
      type: object
      required:
        - objective
      properties:
        objective:
          type: string
          description: الهدف الرئيسي المطلوب من فريق الوكلاء
          example: "تصميم نظام API-First للعقود"
        context:
          type: object
          description: سياق إضافي يساعد الوكلاء على الفهم
          additionalProperties: true
        constraints:
          type: array
          description: القيود التشغيلية أو التقنية
          items:
            type: string
          example: ["OpenAPI v3.1", "JWT Auth", "No backend code yet"]
        priority:
          type: string
          description: أولوية التخطيط
          enum: ["low", "medium", "high", "urgent"]
          example: "high"
      example:
        objective: "تصميم نظام API-First للعقود"
        constraints: ["OpenAPI v3.1", "JWT Auth", "No backend code yet"]
        priority: "high"

    AgentsPlanResponse:
      type: object
      required:
        - status
        - data
      properties:
        status:
          type: string
          enum: ["success"]
          description: Status of the response
        data:
          type: object
          required:
            - plan_id
            - objective
            - steps
          properties:
            plan_id:
              type: string
              description: Unique identifier for the generated plan
              example: "plan_01HZX9G8KQK1R2"
            objective:
              type: string
              description: Original objective of the plan
              example: "تصميم نظام API-First للعقود"
            steps:
              type: array
              items:
                $ref: '#/components/schemas/AgentPlanStep'
              description: List of steps in the generated plan
            created_at:
              type: string
              format: date-time
              description: Timestamp when the plan was created
              example: "2026-01-03T00:00:00Z"
          description: The generated plan details
      example:
        status: "success"
        data:
          plan_id: "plan_01HZX9G8KQK1R2"
          objective: "تصميم نظام API-First للعقود"
          steps:
            - step_id: "step-01"
              title: "تحليل الهدف"
              description: "جمع المعطيات وتحليل المشكلة لتحديد نطاق التنفيذ."
              dependencies: ["step-00"]
              estimated_effort: "2 ساعات"
          created_at: "2026-01-03T00:00:00Z"
    
    AuthResponse:
      type: object
      required:
        - status
        - data
      properties:
        status:
          type: string
          enum: [success]
          description: Response status
        data:
          type: object
          required:
            - access_token
            - token_type
            - user
          properties:
            access_token:
              type: string
              description: JWT access token
              example: "eyJhbGciOiJIUzI1NiIs..."
            refresh_token:
              type: string
              description: Refresh token for obtaining new access tokens
              example: "refresh_abc123..."
            token_type:
              type: string
              enum: [Bearer]
              description: Token type
              example: "Bearer"
            expires_in:
              type: integer
              description: Token expiration time in seconds
              example: 3600
            user:
              $ref: '#/components/schemas/UserObject'
          description: Authentication data including tokens and user info
      example:
        status: "success"
        data:
          access_token: "eyJhbGciOiJIUzI1NiIs..."
          refresh_token: "refresh_abc123..."
          token_type: "Bearer"
          expires_in: 3600
          user:
            id: 42
            email: "user@example.com"
            full_name: "John Doe"
            is_admin: false
            created_at: "2026-01-01T00:00:00Z"
            updated_at: "2026-01-03T00:00:00Z"
    
    UserObject:
      type: object
      required:
        - id
        - email
        - full_name
        - is_admin
        - created_at
      properties:
        id:
          type: integer
          description: Unique user identifier
          example: 42
        email:
          type: string
          format: email
          description: User email address
          example: "user@example.com"
        full_name:
          type: string
          description: User's full name
          example: "John Doe"
        is_admin:
          type: boolean
          description: Whether user has admin privileges
          example: false
        created_at:
          type: string
          format: date-time
          description: Account creation timestamp
          example: "2026-01-01T00:00:00Z"
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2026-01-03T00:00:00Z"
      example:
        id: 42
        email: "user@example.com"
        full_name: "John Doe"
        is_admin: false
        created_at: "2026-01-01T00:00:00Z"
        updated_at: "2026-01-03T00:00:00Z"
    
    # ==============================================================================
    # Resource Schemas
    # ==============================================================================
    GenericResource:
      type: object
      required:
        - id
        - type
      properties:
        id:
          type: string
          description: Resource unique identifier
          example: "res_123abc"
        type:
          type: string
          description: Resource type
          example: "mission"
        attributes:
          type: object
          description: Resource attributes
          additionalProperties: true
        relationships:
          type: object
          description: Related resources
          additionalProperties: true
        links:
          type: object
          description: HATEOAS links
          properties:
            self:
              type: string
              format: uri
              example: "https://api.cogniforge.ai/api/v1/resources/mission/res_123abc"
      example:
        id: "res_123abc"
        type: "mission"
        attributes:
          name: "Test Mission"
        relationships:
          owner: "user_42"
        links:
          self: "https://api.cogniforge.ai/api/v1/resources/mission/res_123abc"
    
    PaginatedResourceResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/GenericResource'
            meta:
              allOf:
                - $ref: '#/components/schemas/PaginationMeta'
                - type: object
                  properties:
                    filters:
                      type: object
                      description: Applied filters
                    sort:
                      type: object
                      description: Applied sorting

  
  responses:
    UnauthorizedError:
      description: Authentication required or token invalid/expired
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            missing_token:
              value:
                status: "error"
                error:
                  code: "MISSING_TOKEN"
                  message: "Authentication token is required"
                timestamp: "2026-01-03T00:00:00Z"
            invalid_token:
              value:
                status: "error"
                error:
                  code: "INVALID_TOKEN"
                  message: "Authentication token is invalid or expired"
                timestamp: "2026-01-03T00:00:00Z"
    
    BadRequestError:
      description: Invalid request data
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            validation_error:
              value:
                status: "error"
                error:
                  code: "VALIDATION_ERROR"
                  message: "Request validation failed"
                  details:
                    field: "email"
                    reason: "Invalid email format"
                timestamp: "2026-01-03T00:00:00Z"
    
    NotFoundError:
      description: Resource not found
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            not_found:
              value:
                status: "error"
                error:
                  code: "NOT_FOUND"
                  message: "The requested resource was not found"
                timestamp: "2026-01-03T00:00:00Z"


paths:
  # ==============================================================================
  # Security Endpoints
  # ==============================================================================
  /api/security/health:
    get:
      tags:
        - Security
      summary: Security Health Check
      description: Check if security services are operational
      operationId: securityHealthCheck
      responses:
        '200':
          description: Security services are healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                        example: "healthy"
                      features:
                        type: array
                        items:
                          type: string
                        example: ["jwt", "argon2"]
              examples:
                healthy:
                  value:
                    status: "success"
                    data:
                      status: "healthy"
                      features: ["jwt", "argon2"]
  
  /api/security/register:
    post:
      tags:
        - Security
      summary: Register New User
      description: Create a new user account in the system
      operationId: registerUser
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            examples:
              basic:
                summary: Basic registration
                value:
                  email: "newuser@example.com"
                  password: "SecurePass123!"
                  full_name: "Jane Smith"
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "User registered successfully"
                      user:
                        $ref: '#/components/schemas/UserObject'
              examples:
                success:
                  value:
                    status: "success"
                    data:
                      message: "User registered successfully"
                      user:
                        id: 42
                        email: "newuser@example.com"
                        full_name: "Jane Smith"
                        is_admin: false
                        created_at: "2026-01-03T00:00:00Z"
                        updated_at: "2026-01-03T00:00:00Z"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '409':
          description: User already exists
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                duplicate_email:
                  value:
                    status: "error"
                    error:
                      code: "DUPLICATE_EMAIL"
                      message: "User with this email already exists"
                    timestamp: "2026-01-03T00:00:00Z"
  
  /api/security/login:
    post:
      tags:
        - Security
      summary: Authenticate User
      description: |
        Authenticate user with email and password and receive a JWT token.
        
        **Rate Limiting**: 10 requests per minute per IP
        
        **Security**: Protected by Chrono-Kinetic Defense Shield
      operationId: loginUser
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            examples:
              admin_login:
                summary: Admin login
                value:
                  email: "admin@example.com"
                  password: "AdminPass123!"
              user_login:
                summary: Regular user login
                value:
                  email: "user@example.com"
                  password: "UserPass123!"
      responses:
        '200':
          description: Authentication successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
              examples:
                successful_login:
                  value:
                    status: "success"
                    data:
                      access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                      refresh_token: "refresh_abc123xyz..."
                      token_type: "Bearer"
                      expires_in: 3600
                      user:
                        id: 1
                        email: "user@example.com"
                        full_name: "John Doe"
                        is_admin: false
                        created_at: "2026-01-01T00:00:00Z"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '429':
          description: Too many requests
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                rate_limit:
                  value:
                    status: "error"
                    error:
                      code: "RATE_LIMIT_EXCEEDED"
                      message: "Too many login attempts. Please try again later."
                    timestamp: "2026-01-03T00:00:00Z"

  # ==============================================================================
  # Agents Endpoints
  # ==============================================================================
  /api/v1/agents/plans:
    post:
      tags:
        - Agents
      summary: Create Agent Plan
      description: |
        Generate a structured plan using the agent council.

        **Authentication**: Requires JWT Bearer token.
      operationId: createAgentPlan
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentsPlanRequest'
            examples:
              default:
                summary: Basic planning request
                value:
                  objective: "تصميم نظام API-First للعقود"
                  constraints:
                    - "OpenAPI v3.1"
                    - "JWT Auth"
                  priority: "high"
      responses:
        '201':
          description: Plan generated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentsPlanResponse'
              examples:
                success:
                  value:
                    status: "success"
                    data:
                      plan_id: "plan_01HZX9G8KQK1R2"
                      objective: "تصميم نظام API-First للعقود"
                      steps:
                        - step_id: "step-01"
                          title: "تحليل الهدف"
                          description: "جمع المعطيات وتحليل المشكلة لتحديد نطاق التنفيذ."
                          dependencies: ["step-00"]
                          estimated_effort: "2 ساعات"
                      created_at: "2026-01-03T00:00:00Z"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '429':
          description: Too many requests
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                rate_limit:
                  value:
                    status: "error"
                    error:
                      code: "RATE_LIMIT_EXCEEDED"
                      message: "Too many planning requests. Please try again later."
                    timestamp: "2026-01-03T00:00:00Z"

  /api/v1/agents/plans/{plan-id}:
    get:
      tags:
        - Agents
      summary: Get Agent Plan
      description: Retrieve the details of a previously generated plan.
      operationId: getAgentPlan
      security:
        - BearerAuth: []
      parameters:
        - name: plan-id
          in: path
          required: true
          schema:
            type: string
          description: Unique plan identifier
          example: "plan_01HZX9G8KQK1R2"
      responses:
        '200':
          description: Plan retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentsPlanResponse'
              examples:
                success:
                  value:
                    status: "success"
                    data:
                      plan_id: "plan_01HZX9G8KQK1R2"
                      objective: "تصميم نظام API-First للعقود"
                      steps:
                        - step_id: "step-01"
                          title: "تحليل الهدف"
                          description: "جمع المعطيات وتحليل المشكلة لتحديد نطاق التنفيذ."
                          dependencies: ["step-00"]
                          estimated_effort: "2 ساعات"
                      created_at: "2026-01-03T00:00:00Z"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
  

  # ==============================================================================
  # Observability Endpoints
  # ==============================================================================
  /api/observability/health:
    get:
      tags:
        - Observability
      summary: System Health Check
      description: |
        Comprehensive health check of all system components.
        
        Returns status of:
        - Database connection
        - External services
        - Cache
        - Message queues
      operationId: systemHealthCheck
      responses:
        '200':
          description: System is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [healthy, degraded, unhealthy]
                    example: "healthy"
              examples:
                healthy:
                  value:
                    status: "healthy"

  # ==============================================================================
  # Runtime Coverage Endpoints (Spec Alignment)
  # ==============================================================================
  /health:
    get:
      tags:
        - Observability
      summary: Root Health Check
      description: Basic health check for the service.
      operationId: rootHealthCheck
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /system/health:
    get:
      tags:
        - Observability
      summary: System Health Endpoint
      description: Detailed system health status.
      operationId: systemHealthEndpoint
      responses:
        '200':
          description: System health status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /system/healthz:
    get:
      tags:
        - Observability
      summary: System Healthz Endpoint
      description: Kubernetes liveness probe endpoint.
      operationId: systemHealthzEndpoint
      responses:
        '200':
          description: System health status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /system/info:
    get:
      tags:
        - Observability
      summary: System Info Endpoint
      description: Information about the system version and environment.
      operationId: systemInfoEndpoint
      responses:
        '200':
          description: System information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/security/token/generate:
    post:
      tags:
        - Security
      summary: Generate Security Token
      description: Generate a new security token for internal use.
      operationId: securityTokenGenerate
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Token generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/security/token/verify:
    post:
      tags:
        - Security
      summary: Verify Security Token
      description: Verify the validity of a security token.
      operationId: securityTokenVerify
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Token verification result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/security/user/me:
    get:
      tags:
        - Security
      summary: Get Current User
      description: Retrieve the currently authenticated user's profile.
      operationId: securityCurrentUser
      responses:
        '200':
          description: Current user profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/auth/register:
    post:
      tags:
        - Security
      summary: Register User
      description: Register a new user account via v1 API.
      operationId: authRegister
      security: []
      responses:
        '200':
          description: User registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/auth/login:
    post:
      tags:
        - Security
      summary: Login User
      description: Authenticate user via v1 API.
      operationId: authLogin
      security: []
      responses:
        '200':
          description: User authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'

  /api/v1/auth/logout:
    post:
      tags:
        - Security
      summary: Logout User
      description: Invalidate the current user session.
      operationId: authLogout
      security:
        - BearerAuth: []
      responses:
        '200':
          description: User logged out
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/auth/refresh:
    post:
      tags:
        - Security
      summary: Refresh Token
      description: specific refresh token endpoint.
      operationId: authRefresh
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Token refreshed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'

  /api/v1/auth/reauth:
    post:
      tags:
        - Security
      summary: Re-authenticate User
      description: Perform re-authentication for sensitive operations.
      operationId: authReauth
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Re-authentication completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/auth/password/forgot:
    post:
      tags:
        - Security
      summary: Forgot Password
      description: Initiate password reset process.
      operationId: authForgotPassword
      security: []
      responses:
        '200':
          description: Reset email sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/auth/password/reset:
    post:
      tags:
        - Security
      summary: Reset Password
      description: Complete password reset process.
      operationId: authResetPassword
      security: []
      responses:
        '200':
          description: Password reset
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/users/me:
    get:
      tags:
        - Users
      summary: Get Current User
      description: Retrieve current user profile via v1 API.
      operationId: usersMeGet
      responses:
        '200':
          description: Current user profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserObject'
    patch:
      tags:
        - Users
      summary: Update Current User
      description: Update current user profile details.
      operationId: usersMePatch
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Current user updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserObject'

  /api/v1/users/me/change-password:
    post:
      tags:
        - Users
      summary: Change Password
      description: Change the current user's password.
      operationId: usersMeChangePassword
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Password updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/chat/latest:
    get:
      tags:
        - Agents
      summary: Latest Chat Messages
      description: Retrieve the most recent chat messages.
      operationId: chatLatest
      responses:
        '200':
          description: Latest chat messages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/chat/conversations:
    get:
      tags:
        - Agents
      summary: List Conversations
      description: List all user conversations.
      operationId: chatConversationsList
      responses:
        '200':
          description: Conversations list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/chat/conversations/{conversation-id}:
    get:
      tags:
        - Agents
      summary: Get Conversation
      description: Retrieve a specific conversation by ID.
      operationId: chatConversationGet
      parameters:
        - name: conversation-id
          in: path
          description: Unique conversation identifier used to retrieve the conversation details.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Conversation details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /admin/api/chat/latest:
    get:
      tags:
        - Admin
      summary: Admin Latest Chat
      description: Retrieve latest chat messages for admin review.
      operationId: adminChatLatest
      responses:
        '200':
          description: Latest admin chat messages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /admin/api/conversations:
    get:
      tags:
        - Admin
      summary: Admin Conversations
      description: List all conversations for administration.
      operationId: adminConversationsList
      responses:
        '200':
          description: Admin conversations list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /admin/api/conversations/{conversation-id}:
    get:
      tags:
        - Admin
      summary: Admin Conversation Details
      description: Get details of a conversation for administration.
      operationId: adminConversationGet
      parameters:
        - name: conversation-id
          in: path
          description: Unique conversation identifier used by admins to fetch conversation details.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Admin conversation details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/admin/ai-config:
    get:
      tags:
        - Admin
      summary: Get AI Config
      description: Retrieve current AI configuration.
      operationId: adminAiConfigGet
      responses:
        '200':
          description: AI configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
    put:
      tags:
        - Admin
      summary: Update AI Config
      description: Update AI configuration.
      operationId: adminAiConfigUpdate
      security:
        - BearerAuth: []
      responses:
        '200':
          description: AI configuration updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/admin/audit:
    get:
      tags:
        - Admin
      summary: Audit Log
      description: Retrieve audit logs.
      operationId: adminAuditLog
      responses:
        '200':
          description: Audit entries
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/admin/users:
    get:
      tags:
        - Admin
      summary: List Users
      description: List all registered users.
      operationId: adminUsersList
      responses:
        '200':
          description: Users list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedResourceResponse'
    post:
      tags:
        - Admin
      summary: Create User
      description: Admin create a new user.
      operationId: adminUsersCreate
      security:
        - BearerAuth: []
      responses:
        '200':
          description: User created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /admin/users/count:
    get:
      tags:
        - Admin
      summary: Count Users
      description: Get the total count of users.
      operationId: adminUsersCount
      responses:
        '200':
          description: Users count
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/admin/users/{user-id}/roles:
    post:
      tags:
        - Admin
      summary: Update User Roles
      description: Update roles assigned to a user.
      operationId: adminUsersRolesUpdate
      security:
        - BearerAuth: []
      parameters:
        - name: user-id
          in: path
          required: true
          description: Unique identifier of the user
          schema:
            type: string
      responses:
        '200':
          description: User roles updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/admin/users/{user-id}/status:
    patch:
      tags:
        - Admin
      summary: Update User Status
      description: Update the status of a user account.
      operationId: adminUsersStatusUpdate
      security:
        - BearerAuth: []
      parameters:
        - name: user-id
          in: path
          required: true
          description: Unique identifier of the user
          schema:
            type: string
      responses:
        '200':
          description: User status updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/observability/aiops:
    get:
      tags:
        - Observability
      summary: AIOps Overview
      description: Overview of AI operations metrics.
      operationId: observabilityAiops
      responses:
        '200':
          description: AIOps status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/observability/alerts:
    get:
      tags:
        - Observability
      summary: Alerts Overview
      description: Current active alerts.
      operationId: observabilityAlerts
      responses:
        '200':
          description: Alerts list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/observability/analytics/{path}:
    get:
      tags:
        - Observability
      summary: Analytics Path
      description: Retrieve specific analytics data.
      operationId: observabilityAnalyticsPath
      parameters:
        - name: path
          in: path
          required: true
          description: Path to the analytics resource
          schema:
            type: string
      responses:
        '200':
          description: Analytics response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/observability/gitops:
    get:
      tags:
        - Observability
      summary: GitOps Overview
      description: GitOps synchronization status.
      operationId: observabilityGitops
      responses:
        '200':
          description: GitOps status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/observability/metrics:
    get:
      tags:
        - Observability
      summary: Metrics Overview
      description: General system metrics.
      operationId: observabilityMetrics
      responses:
        '200':
          description: Metrics summary
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/observability/performance:
    get:
      tags:
        - Observability
      summary: Performance Overview
      description: System performance indicators.
      operationId: observabilityPerformance
      responses:
        '200':
          description: Performance metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/data-mesh/contracts:
    post:
      tags:
        - CRUD
      summary: Create Data Contract
      description: Create a new data contract.
      operationId: dataMeshContractsCreate
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Data contract created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/data-mesh/metrics:
    get:
      tags:
        - CRUD
      summary: Data Mesh Metrics
      description: Retrieve metrics for data mesh.
      operationId: dataMeshMetrics
      responses:
        '200':
          description: Data mesh metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/overmind/missions:
    post:
      tags:
        - Agents
      summary: Create Overmind Mission
      description: Create a mission for the Overmind agent.
      operationId: overmindMissionsCreate
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Mission created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/overmind/missions/{mission-id}:
    get:
      tags:
        - Agents
      summary: Get Overmind Mission
      description: Retrieve details of an Overmind mission.
      operationId: overmindMissionGet
      parameters:
        - name: mission-id
          in: path
          required: true
          description: Unique identifier of the mission
          schema:
            type: string
      responses:
        '200':
          description: Mission details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/qa/question:
    post:
      tags:
        - Agents
      summary: Submit QA Question
      description: Submit a question to the QA agent.
      operationId: qaQuestionSubmit
      security:
        - BearerAuth: []
      responses:
        '200':
          description: QA response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/missions:
    get:
      tags:
        - Agents
      summary: List Missions
      description: List all active missions.
      operationId: listMissions
      responses:
        '200':
          description: Missions list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/missions/{mission-id}:
    get:
      tags:
        - Agents
      summary: Mission Details
      description: Get details for a specific mission.
      operationId: getMissionDetails
      parameters:
        - name: mission-id
          in: path
          required: true
          description: Unique identifier of the mission
          schema:
            type: integer
      responses:
        '200':
          description: Mission details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /api/v1/agents/langgraph/run:
    post:
      tags:
        - Agents
      summary: Run LangGraph
      description: Execute a LangGraph run.
      operationId: runLangGraph
      security:
        - BearerAuth: []
      responses:
        '201':
          description: LangGraph run created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /system/asyncapi.json:
    get:
      tags:
        - Observability
      summary: AsyncAPI Schema
      description: Retrieve the AsyncAPI schema definition.
      operationId: asyncapiSchema
      responses:
        '200':
          description: AsyncAPI JSON schema
          content:
            application/json:
              schema:
                type: object

  /v1/content/search:
    get:
      tags:
        - CRUD
      summary: Search Content
      description: Search across all content.
      operationId: contentSearch
      responses:
        '200':
          description: Content search results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/content/{id}:
    get:
      tags:
        - CRUD
      summary: Get Content
      description: Retrieve content by ID.
      operationId: getContent
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the content
          schema:
            type: string
      responses:
        '200':
          description: Content details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/content/{id}/raw:
    get:
      tags:
        - CRUD
      summary: Get Content Raw
      description: Retrieve raw content data.
      operationId: getContentRaw
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the content
          schema:
            type: string
      responses:
        '200':
          description: Raw content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/content/{id}/solution:
    get:
      tags:
        - CRUD
      summary: Get Content Solution
      description: Retrieve solution for the content.
      operationId: getContentSolution
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the content
          schema:
            type: string
      responses:
        '200':
          description: Content solution
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
